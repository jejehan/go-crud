<html>
    <head>
        <style>
            #search-result tr-hover{
                background-color: lightgrey;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <form id="search-form" onsubmit="return false;">
            <input name="search" />
            <input type="submit" value="Search" onclick="submitSearch()" />
        </form>

        <table width="100%">
            <thead>
                <tr style="text-align: left">
                    <th width="40%"> Title </th>
                    <th width="30%"> Author </th>
                    <th width="10%"> Year </th>
                    <th width="20%"> ID </th>
                </tr>
            </thead>
            <tbody id="search-result"></tbody>
        </table>
    </body>
    <script
        src="https://code.jquery.com/jquery-3.1.1.min.js"
        integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
        crossorigin="anonymous"></script>
    <script>
        function submitSearch() {
            $.ajax({
                url: "/search",
                method: "POST",
                data: $("#search-form").serialize(),
                success: function (resp) {
                    var parsed = JSON.parse(resp)
                    if (!parsed) return true;

                    var searchResult = $("#search-result")
                    searchResult.empty();

                    parsed.forEach(function (result){
                        var row =  $("<tr><td>" + result.Title + "</td><td>" + result.Author + "</td><td>" + result.Year + "</td> <td>" + result.ID + "</td></tr>");
                        searchResult.append(row);
                        row.on("click", function(){
                            $.ajax({
                                url: "/books/add?id=" + result.ID,
                                method: "GET",
                            });
                        });
                    });
                }
            });
            return false;
        }
    </script>
</html>